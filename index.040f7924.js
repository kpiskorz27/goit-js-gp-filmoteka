function e(e,t,o,i){Object.defineProperty(e,t,{get:o,set:i,enumerable:!0,configurable:!0})}var t=globalThis,o={},i={},n=t.parcelRequired7c6;null==n&&((n=function(e){if(e in o)return o[e].exports;if(e in i){var t=i[e];delete i[e];var n={id:e,exports:{}};return o[e]=n,t.call(n.exports,n,n.exports),n.exports}var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){i[e]=t},t.parcelRequired7c6=n);var a=n.register;a("ifJdc",function(t,o){e(t.exports,"register",()=>i,e=>i=e);var i,n=new Map;i=function(e,t){for(var o=0;o<t.length-1;o+=2)n.set(t[o],{baseUrl:e,path:t[o+1]})}}),a("5PtdM",function(e,t){let o=document.querySelector(".queue-button");function i(){let e=sessionStorage.getItem("currentMovie");return e?JSON.parse(e):null}function n(e){return(JSON.parse(localStorage.getItem("queue"))||[]).some(t=>t.id===e.id)}function a(e){let t=document.createElement("div");t.classList.add("notification"),t.textContent=e,document.body.appendChild(t),setTimeout(()=>{t.remove()},3e3)}document.querySelector(".movie-modal"),o.addEventListener("click",()=>{let e,t;let o=i();o?(n(o)?(console.log("This movie is already in the queue."),a("This movie is already in the queue.")):((e=JSON.parse(localStorage.getItem("queue"))||[]).push(o),localStorage.setItem("queue",JSON.stringify(e)),console.log("Movie added to queue.",o),a("Movie added to queue.")),(JSON.parse(localStorage.getItem("watched"))||[]).some(e=>e.id===o.id)&&(t=(JSON.parse(localStorage.getItem("watched"))||[]).filter(e=>e.id!==o.id),localStorage.setItem("watched",JSON.stringify(t)),console.log("Movie removed from watched list.",o))):console.log("No movie data found in session storage.")}),document.querySelector(".remove-queue-button").addEventListener("click",()=>{let e=i();if(e){if(n(e)){let t;t=(JSON.parse(localStorage.getItem("queue"))||[]).filter(t=>t.id!==e.id),localStorage.setItem("queue",JSON.stringify(t)),console.log("Movie removed from queue:",e),a("Movie removed from queue.")}else console.log("This movie is not in the queue."),a("This movie is not in the queue.")}else console.log("No movie data found in session storage.")})}),a("3xRUa",function(e,t){function o(){let e=sessionStorage.getItem("currentMovie");return e?JSON.parse(e):null}function i(e){return(JSON.parse(localStorage.getItem("watched"))||[]).some(t=>t.id===e.id)}function n(e){let t=document.createElement("div");t.classList.add("notification"),t.textContent=e,document.body.appendChild(t),setTimeout(()=>{t.remove()},3e3)}document.querySelector(".watched-button").addEventListener("click",()=>{let e,t;let a=o();a?(i(a)?(console.log("This movie is already in the watched list."),n("This movie is already in the watched list.")):((e=JSON.parse(localStorage.getItem("watched"))||[]).push(a),localStorage.setItem("watched",JSON.stringify(e)),console.log("Movie added to watched list.",a),n("Movie added to watched list.")),(JSON.parse(localStorage.getItem("queue"))||[]).some(e=>e.id===a.id)&&(t=(JSON.parse(localStorage.getItem("queue"))||[]).filter(e=>e.id!==a.id),localStorage.setItem("queue",JSON.stringify(t)),console.log("Movie removed from queue:",a))):console.log("No movie data found in session storage.")}),document.querySelector(".remove-watched-button").addEventListener("click",()=>{let e=o();if(e){if(i(e)){let t;t=(JSON.parse(localStorage.getItem("watched"))||[]).filter(t=>t.id!==e.id),localStorage.setItem("watched",JSON.stringify(t)),console.log("Movie removed from watched list:",e),n("Movie removed from watched list.")}else console.log("This movie is not in the watched list."),n("This movie is not in the watched list.")}else console.log("No movie data found in session storage.")})}),a("g1uI7",function(t,o){e(t.exports,"getMovieDetails",()=>s);var i=n("PP2np");let a="ddd78f0e80e0d30735adfd081ca2dc47",l=`https://api.themoviedb.org/3/movie/popular?api_key=${a}`,r="";async function s(e){let t=`https://api.themoviedb.org/3/movie/${e}?api_key=${a}&language=en-US`;try{let e=await fetch(t);return await e.json()}catch(e){return console.error("Error while fetching movie details:",e),null}}let c=document.querySelector(".loader");async function d(e=1){let t=`${l}&page=${e}`;c.classList.remove("hidden");try{await new Promise(e=>setTimeout(e,1e3));let e=await fetch(t),o=await e.json(),i=o.results,n=await Promise.all(i.map(async e=>{let t=await s(e.id);return{...e,...t}}));return c.classList.add("hidden"),{movies:n,totalPages:o.total_pages}}catch(e){return console.error("Error while fetching data:",e),{movies:[],totalPages:0}}}function u(e){let t=document.querySelector(".film-list");t.innerHTML="";let o=e.map(e=>(function(e){let t=document.createElement("div");t.classList.add("movie-item"),t.style.cursor="pointer",t.setAttribute("data-modal",""),t.setAttribute("data-id",e.id);let o=document.createElement("img");e.poster_path?(o.src=`https://image.tmdb.org/t/p/w500${e.poster_path}`,o.alt=e.title):(o.src=i&&i.__esModule?i.default:i,o.alt="no image"),t.appendChild(o);let n=document.createElement("div");n.classList.add("content-wrapper");let a=document.createElement("h2");a.textContent=e.title,t.appendChild(a);let l=e.genres.map(e=>"Science Fiction"===e.name?"Sci-Fi":e.name),r="";r=l.length>2?`${l.slice(0,2).join(", ")}, Other`:l.join(", ");let s=document.createElement("p");s.textContent=r,n.appendChild(s);let c=document.createElement("p"),d=new Date(e.release_date).getFullYear();c.textContent=`| ${d}`,c.classList.add("movie-year"),n.appendChild(c),t.appendChild(n);let u=document.createElement("p"),m=e.vote_average.toFixed(1);return u.textContent=`${m}`,t.appendChild(u),n.appendChild(u),u.classList.add("main-rating"),t})(e));t.append(...o)}function m(){window.scrollTo({top:0,behavior:"smooth"})}async function p(e){if(r){let{movies:t,totalPages:o}=await h(r,e);u(t),v(o,e),m()}else if("/my-library.html"===window.location.pathname)u([]),v(1,1),m();else{let{movies:t,totalPages:o}=await d(e);u(t),v(o,e),m()}}async function g(){(window.location.pathname.includes("/index.html")||"/"===window.location.pathname||"https://kpiskorz27.github.io/goit-js-gp-filmoteka/"===window.location.href)&&p(1)}function v(e,t){let o=document.querySelector(".pagination");o.innerHTML="";let i=1,n=Math.min(5,e);e>5&&(n=(i=Math.max(t-Math.floor(2.5),1))+5-1)>=1e3&&(i=Math.max((n=1e3)-5+1,1));let a=document.createElement("button");if(a.innerHTML=`
    <svg class="icon icon-arrow-left" viewBox="0 0 32 32" width="18" height="20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.667" d="M25.333 16H6.666M16 25.333 6.667 16 16 6.667" style="stroke:var(--color2, #000)"/>
    </svg>
`,a.style.cursor="pointer",a.classList.add("page-button","first-button"),t>1&&a.addEventListener("click",()=>{p(t-1),f(!1)}),o.appendChild(a),i>1){let e=document.createElement("button");if(e.textContent=1,e.style.cursor="pointer",e.classList.add("page-button"),e.addEventListener("click",()=>{p(1),f(!1)}),o.appendChild(e),i>2){let e=document.createElement("span");e.textContent="...",e.classList.add("ellipsis-span"),o.appendChild(e)}}for(let e=i;e<=n;e++){let i=document.createElement("button");i.textContent=e,i.style.cursor="pointer",i.classList.add("page-button"),e===t&&i.classList.add("active"),i.addEventListener("click",()=>{p(e),f(!1)}),o.appendChild(i)}if(n<e){if(n<e-1){let e=document.createElement("span");e.textContent="...",e.classList.add("ellipsis-span"),o.appendChild(e)}let t=Math.min(n+15,e),i=document.createElement("button");i.style.cursor="pointer",i.textContent=t,i.classList.add("page-button"),i.addEventListener("click",()=>{p(t)}),o.appendChild(i)}let l=document.createElement("button");l.innerHTML=`
      <svg class="icon icon-arrow-right" viewBox="0 0 32 32" width="18" height="20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.667" d="M6.667 16h18.667M16 25.333l9.333-9.333-9.333-9.333" style="stroke:var(--color2, #000)"/>
      </svg>
  `,l.classList.add("page-button","last-button"),l.style.cursor="pointer",l.addEventListener("click",()=>{p(Math.min(t+1,e)),f(!1)}),o.appendChild(l)}async function h(e,t=1){let o=`https://api.themoviedb.org/3/search/movie?api_key=${a}&query=${encodeURIComponent(e)}&page=${t}`;try{c.classList.remove("hidden");let e=await fetch(o),t=await e.json(),i=t.results,n=await Promise.all(i.map(async e=>{let t=await s(e.id);return{...e,...t}}));return c.classList.add("hidden"),{movies:n,totalPages:t.total_pages}}catch(e){return console.error("Error while searching movies:",e),{movies:[],totalPages:0}}}function f(e){let t=document.getElementById("error-message");e?t.style.opacity="1":t.style.opacity="0"}async function w(e,t=1){if(r=e,""===e.trim())await p(t);else{let{movies:o,totalPages:i}=await h(e,t);0===o.length?(f(!0),r="",document.querySelector(".search-input").value=""):(f(!1),u(o),v(i,t))}}window.addEventListener("load",g);let y=document.querySelector(".search-form");y&&y.addEventListener("submit",function(e){e.preventDefault(),w(document.querySelector(".search-input").value,1)})}),a("PP2np",function(e,t){e.exports=new URL("no-poster-available.c6ce9600.jpg",import.meta.url).toString()}),a("8sx2c",function(e,t){var o=n("g1uI7");let i=document.querySelector(".movie-modal"),a=document.querySelector(".movie-backdrop"),l=document.querySelector(".modal-close-btn"),r=document.querySelector(".movie-image");function s(e){e.preventDefault(),a.classList.add("is-hidden"),i.classList.add("is-hidden"),document.removeEventListener("keydown",c),a.removeEventListener("click",s),l.removeEventListener("click",s)}function c(e){"Escape"===e.code&&s(e)}document.addEventListener("click",function(e){e.target.classList.contains("movie-backdrop")&&s(e)}),window.addEventListener("keydown",c),function e(){let t=document.querySelectorAll(".film-list");console.log("All Movies:",t),t.length?t.forEach(e=>{e.addEventListener("click",function(e){let t=e.target.closest(".movie-item");if(console.log("Target:",t),t){let n=t.dataset.id;console.log("Movie ID:",n);let c=t.querySelector("img").getAttribute("src");console.log("Card Poster:",c),r.setAttribute("src",c),(0,o.getMovieDetails)(n).then(t=>{console.log("Movie Details:",t),sessionStorage.setItem("currentMovie",JSON.stringify(t)),function(e){let t=i.querySelector(".movie-title");i.querySelector(".average-rate");let o=i.querySelector(".total-vote"),n=i.querySelector(".movie-popularity"),a=i.querySelector(".movie-original-title"),l=i.querySelector(".movie-genre"),r=i.querySelector(".movie-about-par"),s=e.genres.map(e=>e.name).join(", ");l.textContent=s,t.textContent=e.title,o.innerHTML=`<span class="movie-average-rate">${e.vote_average.toFixed(1)}</span> / <span class="movie-votes">${e.vote_count}</span>`,n.textContent=e.popularity,a.textContent=e.original_title,l.textContent=s,r.textContent=e.overview}(t),e.preventDefault(),a.classList.remove("is-hidden"),i.classList.remove("is-hidden"),l.addEventListener("click",s)})}})}):setTimeout(e,1e3)}()}),n("ifJdc").register(new URL("",import.meta.url).toString(),JSON.parse('["9zqhd","index.040f7924.js","2NfRA","no-poster-available.c6ce9600.jpg"]'));
//# sourceMappingURL=index.040f7924.js.map
