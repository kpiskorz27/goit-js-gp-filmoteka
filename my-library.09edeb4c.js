function e(e,t,a,n){Object.defineProperty(e,t,{get:a,set:n,enumerable:!0,configurable:!0})}var t=globalThis,a={},n={},o=t.parcelRequired7c6;null==o&&((o=function(e){if(e in a)return a[e].exports;if(e in n){var t=n[e];delete n[e];var o={id:e,exports:{}};return a[e]=o,t.call(o.exports,o,o.exports),o.exports}var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){n[e]=t},t.parcelRequired7c6=o);var r=o.register;r("5PtdM",function(t,a){e(t.exports,"addToLibrary",()=>r);let n=document.querySelector(".queue-button"),o=JSON.parse(localStorage.getItem("queue"))||{poster_path:"/hu40Uxp9WtpL34jv3zyWLb5zEVY.jpg",genres:[{id:28,name:"Horror"},{id:27,name:"Dramat"}],release_date:"2024-01-18",vote_average:5.444,title:"vjhgyugiy"};n.addEventListener("click",()=>{console.log(o),r("queue",o)});let r=(e,t)=>{try{let a=JSON.stringify(t);localStorage.setItem(e,a)}catch(e){console.log(e)}}}),r("3xRUa",function(e,t){var a=o("5PtdM");let n=document.querySelector(".watched-button"),r={poster_path:"/hu40Uxp9WtpL34jv3zyWLb5zEVY.jpg",genres:[{id:28,name:"Horror"},{id:27,name:"Dramat"}],release_date:"2024-01-18",vote_average:5.444,title:"outlander"};n.addEventListener("click",()=>{console.log(r),(0,a.addToLibrary)("watched",r)})}),r("8sx2c",function(e,t){(()=>{let e={openModalBtn:document.querySelector("[data-modal-open]"),closeModalBtn:document.querySelector("[data-modal-close]"),modal:document.querySelector("[data-modal]")};function t(){e.modal.classList.toggle("is-hidden"),e.modal.classList.contains("is-hidden")?(document.removeEventListener("keydown",n),document.removeEventListener("click",o)):(document.addEventListener("keydown",n),document.addEventListener("click",o))}function a(){e.modal.classList.contains("is-hidden")||t()}function n(e){"Escape"===e.key&&a()}function o(t){t.target===e.modal&&a()}e.openModalBtn.addEventListener("click",t),e.closeModalBtn.addEventListener("click",t),document.addEventListener("keydown",function(e){"Escape"===e.key&&a()}),e.modal.addEventListener("click",function(t){t.target===e.modal&&a()})})()}),r("g1uI7",function(t,a){e(t.exports,"renderMovieCard",()=>l),e(t.exports,"displayMovies",()=>c);let n="ddd78f0e80e0d30735adfd081ca2dc47",o=`https://api.themoviedb.org/3/movie/popular?api_key=${n}`;async function r(e){let t=`https://api.themoviedb.org/3/movie/${e}?api_key=${n}&language=en-US`;try{let e=await fetch(t);return await e.json()}catch(e){return console.error("Error while fetching movie details:",e),null}}async function i(e=1){let t=`${o}&page=${e}`;try{let e=await fetch(t),a=await e.json(),n=a.results;return{movies:await Promise.all(n.map(async e=>{let t=await r(e.id);return{...e,...t}})),totalPages:a.total_pages}}catch(e){return console.error("Error while fetching data:",e),{movies:[],totalPages:0}}}function l(e){let t=document.createElement("div");t.classList.add("movie-item");let a=document.createElement("img");a.src=`https://image.tmdb.org/t/p/w500${e.poster_path}`,a.alt=e.title,t.appendChild(a);let n=document.createElement("div");n.classList.add("content-wrapper");let o=document.createElement("h2");o.textContent=e.title,t.appendChild(o);let r=e.genres.map(e=>"Science Fiction"===e.name?"Sci-Fi":e.name),i="";i=r.length>2?`${r.slice(0,2).join(", ")}, Other`:r.join(", ");let l=document.createElement("p");l.textContent=i,n.appendChild(l);let c=document.createElement("p"),d=new Date(e.release_date).getFullYear();c.textContent=`| ${d}`,c.classList.add("movie-year"),n.appendChild(c),t.appendChild(n);let s=document.createElement("p"),u=e.vote_average.toFixed(1);return s.textContent=`${u}`,t.appendChild(s),n.appendChild(s),s.classList.add("main-rating"),t}function c(e){let t=document.querySelector(".film-list");t.innerHTML="";let a=e.map(e=>l(e));t.append(...a)}async function d(e){let{movies:t,totalPages:a}=await i(e);c(t),function e(t,a){let o=document.querySelector(".pagination");o.innerHTML="";let i=1,l=Math.min(5,t);t>5&&(l=(i=Math.max(a-Math.floor(2.5),1))+5-1)>=1e3&&(i=Math.max((l=1e3)-5+1,1));let s=document.createElement("button");if(s.textContent="<<",s.classList.add("page-button","first-button"),s.addEventListener("click",()=>{d(1)}),o.appendChild(s),i>1){let e=document.createElement("span");e.textContent="...",o.appendChild(e)}for(let e=i;e<=l;e++){let t=document.createElement("button");t.textContent=e,t.classList.add("page-button"),e===a&&t.classList.add("active"),t.addEventListener("click",()=>{d(e)}),o.appendChild(t)}if(l<t){let e=document.createElement("span");e.textContent="...",o.appendChild(e);let a=Math.min(l+15,t),n=document.createElement("button");n.textContent=a,n.classList.add("page-button"),n.addEventListener("click",()=>{d(a)}),o.appendChild(n)}let u=document.createElement("button");async function m(e,t=1){let a=`https://api.themoviedb.org/3/search/movie?api_key=${n}&query=${encodeURIComponent(e)}&page=${t}`;try{let e=await fetch(a),t=await e.json(),n=t.results;return{movies:await Promise.all(n.map(async e=>{let t=await r(e.id);return{...e,...t}})),totalPages:t.total_pages}}catch(e){return console.error("Error while searching movies:",e),{movies:[],totalPages:0}}}async function m(e,t=1){let a=`https://api.themoviedb.org/3/search/movie?api_key=${n}&query=${encodeURIComponent(e)}&page=${t}`;try{let e=await fetch(a),t=await e.json(),n=t.results;return{movies:await Promise.all(n.map(async e=>{let t=await r(e.id);return{...e,...t}})),totalPages:t.total_pages}}catch(e){return console.error("Error while searching movies:",e),{movies:[],totalPages:0}}}async function p(t){let{movies:a,totalPages:n}=await m(t);c(a),e(n,1)}u.textContent=">>",u.classList.add("page-button","last-button"),u.addEventListener("click",()=>{d(Math.min(a+1,t))}),o.appendChild(u),document.querySelector(".search-form").addEventListener("submit",function(e){e.preventDefault(),p(document.querySelector(".search-input").value)})}(a,e)}async function s(){d(1)}window.addEventListener("load",s)}),o("5PtdM"),o("3xRUa"),o("8sx2c");var i=o("g1uI7");let l=[];window.addEventListener("load",async()=>{if(JSON.parse(localStorage.getItem("queue","watched"))){let e=await function(){try{return JSON.parse(localStorage.getItem("watched")),JSON.parse(localStorage.getItem("queue"))}catch(e){console.log(e)}}();l.push(e),console.log(e),console.log(await (0,i.renderMovieCard)(e)),(0,i.displayMovies)(l)}});
//# sourceMappingURL=my-library.09edeb4c.js.map
