var e=globalThis,t={},n={},a=e.parcelRequired7c6;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var o={id:e,exports:{}};return t[e]=o,a.call(o.exports,o,o.exports),o.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},e.parcelRequired7c6=a);var o=a.register;o("5PtdM",function(e,t){Object.defineProperty(e.exports,"addToLibrary",{get:()=>i,set:void 0,enumerable:!0,configurable:!0});let n=document.querySelector(".queue-button");document.querySelector(".movie-modal");let a=JSON.parse(localStorage.getItem("queue"));Array.isArray(a)||(a=[]);let o={poster_path:"/hu40Uxp9WtpL34jv3zyWLb5zEVY.jpg",genres:[{id:28,name:"Horror"},{id:27,name:"Dramat"},{id:80,name:"Crime"}],id:872585,release_date:"2024-01-18",vote_average:5.444,title:"No Way Up"};n.addEventListener("click",()=>{a.push(o),console.log(a),i("queue",a)});let i=(e,t)=>{try{let n=JSON.stringify(t);localStorage.setItem(e,n)}catch(e){console.log(e)}}}),o("3xRUa",function(e,t){var n=a("5PtdM");let o=document.querySelector(".watched-button"),i=JSON.parse(localStorage.getItem("watched"));Array.isArray(i)||(i=[]);let r={poster_path:"/kDp1vUBnMpe8ak4rjgl3cLELqjU.jpg",genres:[{id:28,name:"Action"},{id:16,name:"Animation"}],id:870404,release_date:"2024-03-02",vote_average:6.976,title:"Kung Fu Panda 4"};o.addEventListener("click",()=>{i.push(r),console.log(i),(0,n.addToLibrary)("watched",i)})}),o("8sx2c",function(e,t){let n=document.querySelector(".movie-modal"),a=document.querySelector(".movie-backdrop"),o=document.querySelector(".modal-close-btn");function i(e){e.preventDefault(),a.classList.remove("is-hidden"),n.classList.remove("is-hidden"),o.addEventListener("click",r)}function r(e){e.preventDefault(),a.classList.add("is-hidden"),n.classList.add("is-hidden"),document.removeEventListener("keydown",s),a.removeEventListener("click",r),o.removeEventListener("click",r)}function s(e){"Escape"===e.code&&r(e)}document.addEventListener("click",function(e){e.target.classList.contains("movie-backdrop")&&r(e)}),window.addEventListener("keydown",s),function e(){let t=document.querySelectorAll(".film-list");t.length?[...t].forEach(e=>{e.addEventListener("click",i)}):setTimeout(e,1e3)}()}),a("5PtdM"),a("3xRUa");const i="ddd78f0e80e0d30735adfd081ca2dc47",r=`https://api.themoviedb.org/3/movie/popular?api_key=${i}`;async function s(e){let t=`https://api.themoviedb.org/3/movie/${e}?api_key=${i}&language=en-US`;try{let e=await fetch(t);return await e.json()}catch(e){return console.error("Error while fetching movie details:",e),null}}const l=document.querySelector(".loader");async function c(e=1){let t=`${r}&page=${e}`;l.classList.remove("hidden");try{await new Promise(e=>setTimeout(e,1e3));let e=await fetch(t),n=await e.json(),a=n.results,o=await Promise.all(a.map(async e=>{let t=await s(e.id);return{...e,...t}}));return l.classList.add("hidden"),{movies:o,totalPages:n.total_pages}}catch(e){return console.error("Error while fetching data:",e),{movies:[],totalPages:0}}}function d(e){let t=document.querySelector(".film-list");t.innerHTML="";let n=e.map(e=>(function(e){let t=document.createElement("div");t.classList.add("movie-item"),t.style.cursor="pointer",t.setAttribute("data-modal-open",""),t.setAttribute("data-id",e.id);let n=document.createElement("img");n.src=`https://image.tmdb.org/t/p/w500${e.poster_path}`,n.alt=e.title,t.appendChild(n);let a=document.createElement("div");a.classList.add("content-wrapper");let o=document.createElement("h2");o.textContent=e.title,t.appendChild(o);let i=e.genres.map(e=>"Science Fiction"===e.name?"Sci-Fi":e.name),r="";r=i.length>2?`${i.slice(0,2).join(", ")}, Other`:i.join(", ");let s=document.createElement("p");s.textContent=r,a.appendChild(s);let l=document.createElement("p"),c=new Date(e.release_date).getFullYear();l.textContent=`| ${c}`,l.classList.add("movie-year"),a.appendChild(l),t.appendChild(a);let d=document.createElement("p"),u=e.vote_average.toFixed(1);return d.textContent=`${u}`,t.appendChild(d),a.appendChild(d),d.classList.add("main-rating"),t})(e));t.append(...n)}async function u(e){let{movies:t,totalPages:n}=await c(e);d(t),function e(t,n){let a=document.querySelector(".pagination");a.innerHTML="";let o=1,r=Math.min(5,t);t>5&&(r=(o=Math.max(n-Math.floor(2.5),1))+5-1)>=1e3&&(o=Math.max((r=1e3)-5+1,1));let c=document.createElement("button");if(c.innerHTML=`
    <svg class="icon icon-arrow-left" viewBox="0 0 32 32" width="18" height="20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.667" d="M25.333 16H6.666M16 25.333 6.667 16 16 6.667" style="stroke:var(--color2, #000)"/>
    </svg>
`,c.style.cursor="pointer",c.classList.add("page-button","first-button"),c.addEventListener("click",()=>{u(n-1)}),a.appendChild(c),o>1){let e=document.createElement("span");e.textContent="...",e.classList.add("ellipsis-span"),a.appendChild(e)}for(let e=o;e<=r;e++){let t=document.createElement("button");t.textContent=e,t.style.cursor="pointer",t.classList.add("page-button"),e===n&&t.classList.add("active"),t.addEventListener("click",()=>{u(e)}),a.appendChild(t)}if(r<t){let e=document.createElement("span");e.textContent="...",e.classList.add("ellipsis-span"),a.appendChild(e);let n=Math.min(r+15,t),o=document.createElement("button");o.textContent=n,o.classList.add("page-button"),o.addEventListener("click",()=>{u(n)}),a.appendChild(o)}let m=document.createElement("button");async function p(e,t=1){let n=`https://api.themoviedb.org/3/search/movie?api_key=${i}&query=${encodeURIComponent(e)}&page=${t}`;try{let e=await fetch(n),t=await e.json(),a=t.results;return{movies:await Promise.all(a.map(async e=>{let t=await s(e.id);return{...e,...t}})),totalPages:t.total_pages}}catch(e){return console.error("Error while searching movies:",e),{movies:[],totalPages:0}}}async function p(e,t=1){let n=`https://api.themoviedb.org/3/search/movie?api_key=${i}&query=${encodeURIComponent(e)}&page=${t}`;try{l.classList.remove("hidden");let[e]=await Promise.all([fetch(n),new Promise(e=>setTimeout(e,1e3))]),t=await e.json(),a=t.results,o=await Promise.all(a.map(async e=>{let t=await s(e.id);return{...e,...t}}));return l.classList.add("hidden"),{movies:o,totalPages:t.total_pages}}catch(e){return console.error("Error while searching movies:",e),{movies:[],totalPages:0}}}async function h(t){let{movies:n,totalPages:a}=await p(t);d(n),e(a,1)}m.innerHTML=`
      <svg class="icon icon-arrow-right" viewBox="0 0 32 32" width="18" height="20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.667" d="M6.667 16h18.667M16 25.333l9.333-9.333-9.333-9.333" style="stroke:var(--color2, #000)"/>
      </svg>
  `,m.classList.add("page-button","last-button"),m.style.cursor="pointer",m.addEventListener("click",()=>{u(Math.max(n+1,1))}),a.appendChild(m),document.querySelector(".search-form").addEventListener("submit",function(e){e.preventDefault(),h(document.querySelector(".search-input").value)})}(n,e)}async function m(){u(1)}window.addEventListener("load",m),a("8sx2c");
//# sourceMappingURL=index.d4839dff.js.map
